<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>LHTML</title>
    <style>
    body {
      margin: 0;
      padding: 0;
    }
    </style>
  </head>
  <body>
    <webview id="theview" autosize="on" minwidth="400" minheight="400" style="width: 100vw; height: 100vh;" preload="./guest-preload.js"></webview>
<script>
const {ipcRenderer} = require('electron');

onload = () => {
  const webview = document.getElementById('theview');
  const loadstart = () => {
    console.log('loading');
    webview.openDevTools();
  }
  const loadstop = () => {
    console.log('load stop');
    document.title = 'LHTML - ' + webview.getTitle();
    webview.send('ping');
  }
  webview.addEventListener('did-start-loading', loadstart);
  webview.addEventListener('did-stop-loading', loadstop);

  // Open...
  ipcRenderer.on('load-file', (event, url) => {
    console.log('load file', event, url);
    webview.src = url;
  })

  // Reload...
  ipcRenderer.on('reload-file', (event) => {
    webview.reload();
  });

  webview.addEventListener('ipc-message', (event) => {
    console.log('got event', event);
  });

  console.log('webview.webContents', webview.webContents);
}
</script>
  </body>
</html>